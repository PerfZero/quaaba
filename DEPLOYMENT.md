# –î–µ–ø–ª–æ–π –Ω–∞ Production Server

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `main`.

### üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ GitHub Secrets

–î–æ–±–∞–≤—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions:

```
SERVER_HOST=85.198.103.39
SERVER_USER=root
SERVER_SSH_KEY="–≤–∞—à –ø—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á"
```

### üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–∞

1. –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
```bash
ssh-keygen -t rsa -b 4096 -C "github-actions"
# –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –ø–∞—Ä–æ–ª—å –Ω–∞ –∫–ª—é—á
```

2. –î–æ–±–∞–≤—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
ssh-copy-id -i ~/.ssh/id_rsa.pub root@85.198.103.39
```

3. –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–æ–±–∞–≤—å –≤ GitHub Secrets:
```bash
cat ~/.ssh/id_rsa
# –°–∫–æ–ø–∏—Ä—É–π –≤—ã–≤–æ–¥ –∏ –≤—Å—Ç–∞–≤—å –≤ SERVER_SSH_KEY
```

### üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

–ü—Ä–∏ –ø—É—à–µ –≤ `main` –≤–µ—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. üì• –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. üßπ –û—á–∏—â–∞–µ—Ç—Å—è Docker —Å–∏—Å—Ç–µ–º–∞
3. üî® –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
4. üóÑÔ∏è –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ Prisma
5. üè• –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤
6. ‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

### üåê –î–æ—Å—Ç—É–ø –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

- **Frontend**: http://85.198.103.39:3000
- **Backend API**: http://85.198.103.39:5001

### üîß –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π:

1. –ó–∞–π–¥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
ssh root@85.198.103.39
```

2. –í—ã–ø–æ–ª–Ω–∏:
```bash
cd /var/www/quaaba
git pull origin main
docker compose down --volumes --remove-orphans
docker compose up -d --build --force-recreate
docker compose exec backend npx prisma migrate deploy
docker compose exec backend npx prisma generate
```

### üêõ –û—Ç–ª–∞–¥–∫–∞

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
```bash
docker compose ps
docker compose logs backend
docker compose logs frontend
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

GitHub Actions –ø–æ–∫–∞–∂–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è –≤–æ –≤–∫–ª–∞–¥–∫–µ Actions —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
